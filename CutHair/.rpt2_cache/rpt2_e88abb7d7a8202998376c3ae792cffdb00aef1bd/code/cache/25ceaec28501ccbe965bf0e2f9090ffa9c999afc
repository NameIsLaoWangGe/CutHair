{
  "code": "import { Admin, Shop, Click, EventAdmin, Tools } from \"../Lwg_Template/lwg\";\r\nimport ADManager from \"../TJ/Admanager\";\r\nimport { GEnum, GVariate } from \"../Lwg_Template/Global\";\r\nimport { Game } from \"../Lwg_Template/Game\";\r\nimport ZJADMgr from \"../TJ/ZJADMgr\";\r\nexport default class UISkinTry extends Admin.Scene {\r\n    lwgOnAwake() {\r\n        this.randomNoHave();\r\n        Tools.node_ShowExcludedChild(this.self['Platform'], [Game._platformTpye.Bytedance], true);\r\n        Tools.node_ShowExcludedChild(this.self[Game._platformTpye.Bytedance], [ZJADMgr.ins.shieldLevel], true);\r\n        console.log(ZJADMgr.ins.shieldLevel);\r\n    }\r\n    randomNoHave() {\r\n        let arrOther = Shop.getwayGoldArr(Shop.GoodsClass.Other, undefined, true);\r\n        let arrProp = Shop.getwayGoldArr(Shop.GoodsClass.Props, undefined, true);\r\n        let ele;\r\n        let hair;\r\n        let beard;\r\n        for (let index = 0; index < GVariate._taskArr.length; index++) {\r\n            const element = GVariate._taskArr[index];\r\n            if (element === GEnum.TaskType.HairParent) {\r\n                hair = true;\r\n            }\r\n            else if (element === GEnum.TaskType.LeftBeard || element === GEnum.TaskType.RightBeard || element === GEnum.TaskType.UpLeftBeard || element === GEnum.TaskType.UpRightBeard || element === GEnum.TaskType.MiddleBeard) {\r\n                beard = true;\r\n            }\r\n        }\r\n        if (hair) {\r\n            console.log('本关有剃头任务！');\r\n        }\r\n        if (beard) {\r\n            console.log('本关剃胡须任务！');\r\n        }\r\n        if (hair && beard) {\r\n            if (Math.floor(Math.random() * 2) === 1) {\r\n                this.randomProp();\r\n            }\r\n            else {\r\n                this.randomOther();\r\n            }\r\n        }\r\n        else if (hair && !beard) {\r\n            this.randomProp();\r\n        }\r\n        else if (!hair && beard) {\r\n            this.randomOther();\r\n        }\r\n    }\r\n    randomOther() {\r\n        let ele;\r\n        let arrOther = Shop.getwayGoldArr(Shop.GoodsClass.Other, undefined, true);\r\n        ele = arrOther[Math.floor(Math.random() * arrOther.length)];\r\n        this.self['SkinPic'].skin = 'UI/Shop/Other/' + ele.name + '.png';\r\n        this.beforeTryOtherName = Shop._currentOther.name;\r\n        Shop._currentOther.name = ele.name;\r\n    }\r\n    randomProp() {\r\n        let ele;\r\n        let arrProp = Shop.getwayGoldArr(Shop.GoodsClass.Props, undefined, true);\r\n        ele = arrProp[Math.floor(Math.random() * arrProp.length)];\r\n        this.self['SkinPic'].skin = 'UI/Shop/Props/' + ele.name + '.png';\r\n        this.beforeTryPropName = Shop._currentProp.name;\r\n        Shop._currentProp.name = ele.name;\r\n    }\r\n    lwgBtnClick() {\r\n        Click.on(Click.Type.noEffect, this.self['Bytedance_Low_Select'], this, null, null, this.bytedanceSelectUp);\r\n        Click.on(Click.Type.largen, this.self['Bytedance_Low_BtnGet'], this, null, null, this.bytedanceGetUp);\r\n        Click.on(Click.Type.noEffect, this.self['Bytedance_Mid_Select'], this, null, null, this.bytedanceSelectUp);\r\n        Click.on(Click.Type.largen, this.self['Bytedance_Mid_BtnGet'], this, null, null, this.bytedanceGetUp);\r\n        Click.on(Click.Type.noEffect, this.self['ClickBg'], this, null, null, this.clickBgtUp);\r\n        Click.on(Click.Type.largen, this.self['Bytedance_High_BtnGet'], this, null, null, this.btnGetUp);\r\n        Click.on(Click.Type.largen, this.self['Bytedance_High_BtnNo'], this, null, null, this.btnNoUp);\r\n        Click.on(Click.Type.largen, this.self['OPPO_BtnNo'], this, null, null, this.btnNoUp);\r\n        Click.on(Click.Type.largen, this.self['OPPO_BtnGet'], this, null, null, this.btnGetUp);\r\n    }\r\n    clickBgtUp() {\r\n        let Dot;\r\n        if (this.self['Low'].visible) {\r\n            Dot = this.self['Bytedance_Low_Dot'];\r\n        }\r\n        else if (this.self['Mid'].visible) {\r\n            Dot = this.self['Bytedance_Mid_Dot'];\r\n        }\r\n        if (!Dot) {\r\n            return;\r\n        }\r\n        if (Dot.visible) {\r\n            this.advFunc();\r\n        }\r\n        else {\r\n            if (this.beforeTryOtherName) {\r\n                Shop._currentOther.name = this.beforeTryOtherName;\r\n            }\r\n            if (this.beforeTryPropName) {\r\n                Shop._currentProp.name = this.beforeTryPropName;\r\n            }\r\n            Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n            EventAdmin.notify(GEnum.EventType.changeOther);\r\n            EventAdmin.notify(GEnum.EventType.changeProp);\r\n        }\r\n    }\r\n    bytedanceGetUp(e) {\r\n        e.stopPropagation();\r\n        this.advFunc();\r\n    }\r\n    bytedanceSelectUp(e) {\r\n        e.stopPropagation();\r\n        if (this.self['Low'].visible) {\r\n            if (this.self['Bytedance_Low_Dot'].visible) {\r\n                this.self['Bytedance_Low_Dot'].visible = false;\r\n            }\r\n            else {\r\n                this.self['Bytedance_Low_Dot'].visible = true;\r\n            }\r\n            if (ZJADMgr.ins.CheckPlayVideo()) {\r\n                ADManager.ShowReward(null);\r\n            }\r\n        }\r\n        else if (this.self['Mid'].visible) {\r\n            if (!this.self['Mid']['count']) {\r\n                this.self['Mid']['count'] = 0;\r\n            }\r\n            this.self['Mid']['count']++;\r\n            if (this.self['Mid']['count'] >= 4) {\r\n                if (this.self['Bytedance_Mid_Dot'].visible) {\r\n                    this.self['Bytedance_Mid_Dot'].visible = false;\r\n                }\r\n                else {\r\n                    this.self['Bytedance_Mid_Dot'].visible = true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    advFunc() {\r\n        ADManager.ShowReward(() => {\r\n            Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n            EventAdmin.notify(GEnum.EventType.changeOther);\r\n            EventAdmin.notify(GEnum.EventType.changeProp);\r\n        });\r\n    }\r\n    btnGetUp(e) {\r\n        e.stopPropagation();\r\n        if (Game._platform == Game._platformTpye.OPPO) {\r\n            Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n            EventAdmin.notify(GEnum.EventType.changeOther);\r\n            EventAdmin.notify(GEnum.EventType.changeProp);\r\n        }\r\n        else {\r\n            ADManager.ShowReward(() => {\r\n                Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n                EventAdmin.notify(GEnum.EventType.changeOther);\r\n                EventAdmin.notify(GEnum.EventType.changeProp);\r\n            });\r\n        }\r\n    }\r\n    btnNoUp(event) {\r\n        if (this.beforeTryOtherName) {\r\n            Shop._currentOther.name = this.beforeTryOtherName;\r\n        }\r\n        if (this.beforeTryPropName) {\r\n            Shop._currentProp.name = this.beforeTryPropName;\r\n        }\r\n        Admin._openScene(Admin.SceneName.UIOperation, null, this.self);\r\n        EventAdmin.notify(GEnum.EventType.changeOther);\r\n        EventAdmin.notify(GEnum.EventType.changeProp);\r\n    }\r\n    lwgOnDisable() {\r\n        if (this.beforeTryOtherName) {\r\n            Shop._currentOther.name = this.beforeTryOtherName;\r\n        }\r\n        if (this.beforeTryPropName) {\r\n            Shop._currentProp.name = this.beforeTryPropName;\r\n        }\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/Admanager.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Global.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/Lwg_Template/Game.ts",
    "D:/Game/project/CutHair/Project/CutHair/src/script/TJ/ZJADMgr.ts"
  ]
}
